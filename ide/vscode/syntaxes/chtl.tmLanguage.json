{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "CHTL",
    "patterns": [
        {
            "include": "#comments"
        },
        {
            "include": "#chtl-directives"
        },
        {
            "include": "#html-elements"
        },
        {
            "include": "#text-blocks"
        },
        {
            "include": "#style-blocks"
        },
        {
            "include": "#script-blocks"
        },
        {
            "include": "#attributes"
        },
        {
            "include": "#strings"
        }
    ],
    "repository": {
        "comments": {
            "patterns": [
                {
                    "name": "comment.line.double-slash.chtl",
                    "match": "//.*$"
                },
                {
                    "name": "comment.block.chtl",
                    "begin": "/\\*",
                    "end": "\\*/"
                },
                {
                    "name": "comment.line.double-dash.chtl",
                    "match": "--.*$"
                }
            ]
        },
        "chtl-directives": {
            "patterns": [
                {
                    "name": "keyword.control.directive.chtl",
                    "match": "\\[(Template|Custom|Import|Configuration|Namespace|Export|Origin)\\]"
                },
                {
                    "name": "variable.language.chtl",
                    "match": "@(Element|Style|Var|Html|JavaScript|Chtl|CJmod)"
                },
                {
                    "name": "keyword.operator.from.chtl",
                    "match": "\\b(from|as|inherit|delete|insert|except)\\b"
                }
            ]
        },
        "html-elements": {
            "patterns": [
                {
                    "name": "entity.name.tag.chtl",
                    "match": "\\b(html|head|body|div|span|p|a|img|h[1-6]|ul|ol|li|table|tr|td|th|form|input|button|section|article|nav|header|footer|main|aside)\\b"
                }
            ]
        },
        "text-blocks": {
            "name": "meta.text-block.chtl",
            "begin": "\\b(text)\\s*\\{",
            "beginCaptures": {
                "1": {
                    "name": "keyword.control.text.chtl"
                }
            },
            "end": "\\}",
            "patterns": [
                {
                    "include": "#strings"
                },
                {
                    "name": "string.unquoted.chtl",
                    "match": "[^\"'{}]+"
                }
            ]
        },
        "style-blocks": {
            "name": "meta.style-block.chtl",
            "begin": "\\b(style)\\s*\\{",
            "beginCaptures": {
                "1": {
                    "name": "keyword.control.style.chtl"
                }
            },
            "end": "\\}",
            "patterns": [
                {
                    "include": "source.css"
                },
                {
                    "name": "variable.other.chtl",
                    "match": "\\b\\w+\\([^)]*\\)"
                },
                {
                    "include": "#chtl-directives"
                }
            ]
        },
        "script-blocks": {
            "name": "meta.script-block.chtl",
            "begin": "\\b(script)\\s*\\{",
            "beginCaptures": {
                "1": {
                    "name": "keyword.control.script.chtl"
                }
            },
            "end": "\\}",
            "patterns": [
                {
                    "include": "#chtl-js-features"
                },
                {
                    "include": "source.js"
                }
            ]
        },
        "chtl-js-features": {
            "patterns": [
                {
                    "name": "string.interpolation.chtl",
                    "begin": "\\{\\{",
                    "end": "\\}\\}",
                    "patterns": [
                        {
                            "name": "variable.other.selector.chtl",
                            "match": "[#.]?\\w+"
                        }
                    ]
                },
                {
                    "name": "keyword.operator.arrow.chtl",
                    "match": "->"
                },
                {
                    "name": "support.function.chtl",
                    "match": "\\b(listen|animate)\\b"
                },
                {
                    "name": "keyword.control.event.chtl",
                    "match": "\\b(on)\\s+(click|hover|focus|blur|change|submit|load|keydown|keyup|mouseenter|mouseleave)"
                }
            ]
        },
        "attributes": {
            "patterns": [
                {
                    "name": "entity.other.attribute-name.chtl",
                    "match": "\\b(id|class|href|src|alt|title|style|type|name|value|placeholder)\\s*:"
                },
                {
                    "match": "(\\w+)\\s*(:)\\s*",
                    "captures": {
                        "1": {
                            "name": "entity.other.attribute-name.chtl"
                        },
                        "2": {
                            "name": "punctuation.separator.key-value.chtl"
                        }
                    }
                }
            ]
        },
        "strings": {
            "patterns": [
                {
                    "name": "string.quoted.double.chtl",
                    "begin": "\"",
                    "end": "\"",
                    "patterns": [
                        {
                            "name": "constant.character.escape.chtl",
                            "match": "\\\\."
                        }
                    ]
                },
                {
                    "name": "string.quoted.single.chtl",
                    "begin": "'",
                    "end": "'",
                    "patterns": [
                        {
                            "name": "constant.character.escape.chtl",
                            "match": "\\\\."
                        }
                    ]
                }
            ]
        }
    },
    "scopeName": "source.chtl"
}